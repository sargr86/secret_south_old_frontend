<mat-spinner [diameter]="spinnerDiameter" *ngIf="common.dataLoading"></mat-spinner>
<div class="formContainer">

  <form [formGroup]="saveTourForm" class="saveTourForm"
        *ngIf="!common.dataLoading && companies && companies.length > 0 && tourTypes.length > 0">

    <!-- Current form title -->
    <h4 class="formTitle">
      <ng-container *ngIf="!editCase">
        <!-- <mat-icon class="title_sign">add_box</mat-icon> -->
        <span>Add a new Tour routes</span>
      </ng-container>
      <ng-container *ngIf="editCase">
        <mat-icon>edit</mat-icon>
        <span>Edit tour details</span>
      </ng-container>
    </h4>


    <div class="input-wrap">
      <div class="input">
        <input type="text" placeholder="Tour Type" value="">
      </div>

      <div class="select">
        <select name="" id="">
          <option value="">Aghada</option>
          <option value="">option</option>
          <option value="">option</option>
        </select>
      </div>

      <button class="btn add-rout">+ Add Route</button>

      <div class="row">
        <div class="input">
          <input type="text" placeholder="Start Date" value="">
        </div>

        <div class="input">
          <input type="text" placeholder="End Date" value="">
        </div>
      </div>

      <div class="row">
        <div class="input">
          <input type="text" placeholder="Start time" value="">
        </div>

        <div class="input">
          <input type="text" placeholder="End time" value="">
        </div>
      </div>

      <div class="row">
        <div class="input">
          <input type="text" placeholder="Total count" value="">
        </div>

        <div class="input">
          <input type="text" placeholder="Price" value="">
        </div>
      </div>




    </div>






    <!-- Name field -->
    <mat-form-field>
      <input matInput placeholder="Name" formControlName="name" required>
      <mat-error *ngIf="nameCtrl.hasError('required')">
        Tour name is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <!-- Latitude field -->
    <!-- <mat-form-field>
      <input matInput placeholder="Latitude" formControlName="lat" required>
      <mat-error *ngIf="latCtrl.hasError('required')">
        Latitude is <strong>required</strong>
      </mat-error>
      <mat-error *ngIf="latCtrl.hasError('patternInvalid')">
        Latitude is <strong>invalid</strong>
      </mat-error>
    </mat-form-field> -->

    <!-- Longitude field -->
    <!-- <mat-form-field>
      <input matInput placeholder="Longitude" formControlName="lng" required>
      <mat-error *ngIf="lngCtrl.hasError('required')">
        Longitude is <strong>required</strong>
      </mat-error>
      <mat-error *ngIf="lngCtrl.hasError('patternInvalid')">
        Longitude is <strong>invalid</strong>
      </mat-error>
    </mat-form-field> -->

    <!-- Tour address field -->
    <!-- <div class="addressContainer">
      <mat-form-field>
                   <textarea matInput formControlName="address" placeholder="Address" #searchAddress required></textarea>
        <input matInput class="ngx" ngx-google-places-autocomplete formControlName="address"
               placeholder="Address" id="searchAddress"
               [options]='options' #searchAddress="ngx-places" required/>
        <mat-error *ngIf="addressCtrl.hasError('required')">
          Tour address is <strong>required</strong>
        </mat-error>
      </mat-form-field>
      <button (click)="resetAddress()" class="resetAddress">
        <mat-icon>replay</mat-icon>
      </button>
    </div>-->

    <!-- Tours type field -->
    <mat-form-field>
      <mat-select placeholder="Tours Type" formControlName="tours_type_id" required>
        <mat-option>Please choose</mat-option>
        <mat-option *ngFor="let t of tourTypes" [value]="t['id']">
          {{t['name']}}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="saveTourForm.get('tours_type_id').hasError('required')">
        Tour type is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <!-- Partner field -->
    <mat-form-field>
      <mat-select placeholder="Company" formControlName="company_id" required>
        <mat-option>Please choose</mat-option>
        <mat-option *ngFor="let c of companies" [value]="c.id">
          {{c.name}}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="saveTourForm.get('company_id').hasError('required')">
        Partner company is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <!-- Image field -->
    <div class="fileContainer" [hidden]="true">
      <input type="file" *ngIf="!editCase" (change)="getFile($event.target['files'])" required>
      <mat-spinner [diameter]="spinnerDiameter" [hidden]="!common.formProcessing"></mat-spinner>
    </div>

    <!-- Action buttons -->
    <div class="actions">
      <mat-spinner [diameter]="spinnerDiameter" *ngIf="common.formProcessing"></mat-spinner>
      <button type="button" class="backBtn" (click)="router.navigate([redirectUrl])">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <button mat-raised-button color="primary" class="saveBtn" (click)="saveTour(searchAddress)">
        Save Tour
      </button>
    </div>
  </form>

  <!-- Drop zone -->
  <div class="dropzoneContainer" *ngIf="!common.dataLoading && companies && companies.length > 0 && tourTypes.length > 0">
    <div class="savedImgContainer" *ngIf="coverPath && coverShown">
      <img [src]="coverPath" class="savedImg">
    </div>

    <dropzone class="multiple" [message]="'Click or drag images here to upload'" [config]="dropzoneConfig"
              (addedFile)="getFile($event)" (removedFile)="removeDropzoneImg($event)"
              *ngIf="!coverShown"></dropzone>
  </div>

  <ng-container *ngIf="tourData">
    <ngx-gallery [options]="galleryOptions" [images]="tourData.images" class="editFormGallery"
                 (previewOpen)="toggleSidebar('hide')" (previewClose)="toggleSidebar('show')"></ngx-gallery>
  </ng-container>



<!--  <div class="dropzoneContainer"-->
<!--       *ngIf="!common.dataLoading && companies && companies.length > 0 && tourTypes.length > 0">-->
<!--    <img *ngIf="tourData && imgPath" [src]="imgPath" class="savedImg" [alt]="tourData.name">-->
<!--    <button class="removeSavedImg" (click)="removeSavedImg()">Remove</button>-->
<!--    <dropzone [message]="'Click or drag images here to upload'" (addedFile)="getFile($event)" class="multiple"-->
<!--              *ngIf="!editCase||(editCase && !imgPath)"></dropzone>-->
<!--  </div>-->
</div>
