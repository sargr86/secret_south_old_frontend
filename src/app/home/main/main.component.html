<app-navbar></app-navbar>

<!-- Background/gradient overlay with progress bar, shown at startup-->
<div class="bgContainer" *ngIf="common.showOverlay" @Fading>
    <div id="overlay">
        <div id="overlayText">
            <div id="bigLogo"></div>
            <h1>The Secret South</h1>
            <h3>Where the Ancient East ends and The Wild Atlantic way begins lieâ€™s a <br>secret world born of land and
                sea.</h3>
            <mat-progress-bar mode="determinate" [value]="progressVal"></mat-progress-bar>
        </div>
    </div>

</div>


<div class="col-12 mapFormContainer" *ngIf="!common.showOverlay">
    <form [formGroup]="mapForm" *ngIf="partnerTypes" [hidden]="true">
        <div class="form-group">
            <mat-form-field class="example-full-width">
                <mat-select placeholder="Search By" name="searchBy"
                            formControlName="type" (selectionChange)="changePlace()">
                    <mat-option *ngFor="let t of partnerTypes" [value]="t['name']">{{t['name']}}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
    </form>

    <agm-map [latitude]="lat" [longitude]="lng" style="height:600px;" [zoom]="10" [fullscreenControl]="true"
             [mapTypeControl]="true"
             [mapTypeId]="'terrain'" *ngIf="latlng && latlng.length>0;else no_map_data" [rotateControl]="true"
             [styles]="mapStyles">
        <!--        <agm-direction [origin]="origin" [destination]="destination">-->
        <!--        </agm-direction>-->
        <agm-marker *ngFor="let single of latlng" [latitude]="single.lat" [longitude]="single.lng"
                    [openInfoWindow]="true" [iconUrl]="getIcon()">

            <agm-info-window *ngIf="currentSection=='Ferries'">
                <h4>{{single.name}}</h4>
                <div class="info">
                    <ul>
                        <li>
                            <small>Max: {{single.max_people}} people</small>
                        </li>
                        <li>
                            <small>Min: {{single.min_people}} people</small>
                        </li>
                        <li>
                            <small>Tel: {{single.phone}}</small>
                        </li>
                    </ul>
                </div>
                <button mat-raised-button color="primary">Book</button>
            </agm-info-window>

            <agm-info-window class="infWindow" *ngIf="currentSection=='Food/Drink'">
                <div class="info">
                    <h4>{{single.name}}</h4>
                    <img class="infowindowImg" src="{{imgPath+'uploads/food_drink/'+single.img}}" alt="">
                    <p><span>Description:</span><span>{{single.description}}</span></p>
                    <p><span>Address:</span><span>{{single.address}}</span></p>
                    <button onclick="" mat-raised-button color="primary">Book</button>
                </div>
            </agm-info-window>

            <agm-info-window class="infWindow" *ngIf="currentSection=='Tours'">
                <div class="info">
                    <h4>{{single.name}}</h4>
                    <img class="infowindowImg" src="{{imgPath+'uploads/tour/'+single.img}}" alt="">
                    <p><span>Description:</span><span>{{single.description}}</span></p>
                    <p><span>Address:</span><span>{{single.address}}</span></p>
                    <button onclick="" mat-raised-button color="primary">Book</button>
                </div>
            </agm-info-window>
        </agm-marker>
    </agm-map>

</div>
<ng-template #no_map_data>
    <small class="no_data">No map data found. Please define some.</small>
</ng-template>
